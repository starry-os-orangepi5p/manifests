<?xml version="1.0" encoding="UTF-8"?>
<manifest>
  <!-- GitHub remote for starry-os-orangepi5p organization -->
  <remote name="github" fetch="https://github.com/starry-os-orangepi5p"/>
  <default remote="github" revision="main" sync-j="8"/>

  <!-- ========================================== -->
  <!-- Layer 1: Core Operating System            -->
  <!-- ========================================== -->

  <!-- Main OS - Starry OS based on ArceOS -->
  <project name="starry-mix"         path="starry-mix"              groups="core,layer1"/>

  <!-- ArceOS - Unikernel base -->
  <project name="arceos"             path="arceos"                  groups="core,layer1"/>

  <!-- ========================================== -->
  <!-- Layer 2: OS Core Components                -->
  <!-- ========================================== -->

  <!-- Starry OS subsystems -->
  <project name="starry-process"     path="modules/starry-process"  groups="starry,layer2"/>
  <project name="starry-signal"      path="modules/starry-signal"   groups="starry,layer2"/>
  <project name="starry-vm"          path="modules/starry-vm"        groups="starry,layer2"/>

  <!-- ========================================== -->
  <!-- Layer 3: Platform Support                  -->
  <!-- ========================================== -->

  <!-- Platform abstraction layer -->
  <project name="axplat_crates"                  path="platforms/axplat_crates"             groups="platform,layer3"/>
  <project name="axplat-loongarch64-2k1000la"    path="platforms/loongarch64-2k1000la"      groups="platform,layer3"/>
  <project name="axplat-riscv64-visionfive2"     path="platforms/riscv64-visionfive2"       groups="platform,layer3"/>

  <!-- ========================================== -->
  <!-- Layer 4: Kernel Subsystems                 -->
  <!-- ========================================== -->

  <!-- ArceOS core crates -->
  <project name="axbacktrace"        path="crates/axbacktrace"      groups="axcrate,layer4"/>
  <project name="axcpu"              path="crates/axcpu"            groups="axcrate,layer4"/>
  <project name="axdriver_crates"    path="crates/axdriver_crates"  groups="axcrate,layer4"/>
  <project name="axerrno"            path="crates/axerrno"          groups="axcrate,layer4"/>
  <project name="axio"               path="crates/axio"             groups="axcrate,layer4"/>
  <project name="axsched"            path="crates/axsched"          groups="axcrate,layer4"/>

  <!-- Memory management -->
  <project name="page_table_multiarch" path="crates/page_table_multiarch" groups="memory,layer4"/>

  <!-- ========================================== -->
  <!-- Layer 5: Device Drivers                    -->
  <!-- ========================================== -->

  <project name="plic"               path="drivers/plic"            groups="driver,layer5"/>
  <project name="ahci_driver"        path="drivers/ahci_driver"     groups="driver,layer5"/>
  <project name="simple-sdmmc"       path="drivers/simple-sdmmc"    groups="driver,layer5"/>

  <!-- ========================================== -->
  <!-- Layer 6: System Services                   -->
  <!-- ========================================== -->

  <!-- Network stack -->
  <project name="smoltcp"            path="services/network/smoltcp" groups="network,layer6"/>

  <!-- Filesystem support -->
  <project name="axfs-ng-vfs"        path="services/fs/axfs-ng-vfs"  groups="fs,layer6"/>
  <project name="lwext4_rust"        path="services/fs/lwext4_rust"  groups="fs,layer6"/>
  <project name="lwext4"             path="services/fs/lwext4"       groups="fs,layer6"/>
  <project name="rust-fatfs"         path="services/fs/rust-fatfs"   groups="fs,layer6"/>

  <!-- ========================================== -->
  <!-- Layer 7: Third-party Libraries             -->
  <!-- ========================================== -->

  <project name="priority-queue"     path="third-party/priority-queue" groups="deps,layer7"/>
  <project name="vec-map"            path="third-party/vec-map"        groups="deps,layer7"/>
  <project name="allocator"          path="third-party/allocator"      groups="deps,layer7"/>

  <!-- ========================================== -->
  <!-- Tools & Utilities                          -->
  <!-- ========================================== -->

  <project name="kernel_elf_parser"  path="tools/kernel_elf_parser"  groups="tools"/>
  <project name="flatten_objects"    path="tools/flatten_objects"    groups="tools"/>
  <project name="rustfmt"            path="tools/rustfmt"            groups="tools"/>

  <!-- ========================================== -->
  <!-- Optional/Experimental                      -->
  <!-- ========================================== -->

  <project name="axvisor"            path="extra/axvisor"           groups="extra"/>
</manifest>
